{"version":3,"sources":["designer-edit.js","picture-carousel.js","place-list.js","place-map.js","story-list.js","edit/upload.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["// Control designer edit form.\n\n$(function () {\n\n    if ($('#designer-edit-page').length === 0) {\n        return;\n    }\n\n    $('button[type=\"submit\"]').click(function (e) {\n        e.preventDefault();\n\n        $.ajax({\n            method: 'PUT',\n            url: $('#designer-edit-form').attr('action'),\n            data: $('#designer-edit-form').serializeArray()\n        }).done(function () {\n            window.location.href = $('#designer-edit-form').attr('action');\n        }).fail(function (error) {\n            var response = error.responseJSON;\n            var $alert = $('#designer-edit-form .alert').show();\n            var message = '';\n\n            for (var id in response) {\n                message += '<p>' + response[id] + '</p>';\n            }\n\n            $alert.html(message);\n        });\n    });\n\n    // Country and city select, use Select2.\n    $(\"select#country-select\").select2();\n    $(\"select#city-select\").select2();\n\n    // Tag select, use Select2\n    $(\"select#tag-select\").select2({tags: true});\n});\n","$(function () {\n    $('#picture-carousel').flickity({\n        cellAlign: 'left',\n        freeScroll: true\n    });\n\n    $('#picture-carousel').lightGallery({\n        selector: '.picture-thumb',\n        exThumbImage: 'data-thumb',\n        thumbWidth: 100,\n        thumbContHeight: 120\n    });\n});\n"," \n","var map;\nfunction initMap() {\n  map = new google.maps.Map(document.getElementById('place-map-draw'), {\n    center: {lat: -34.397, lng: 150.644},\n    zoom: 8\n  });\n}\n\n$(function () {\n    $('#place-map-inner').affix({\n        offset: {\n            top: function () {\n                return this.top = $('#kanibar').outerHeight(true) + 20;\n            },\n            bottom: function () {\n                return this.bottom = $('footer').outerHeight(true) + 20;\n            }\n        }\n    });\n});\n","$(function () {\n\n    var $grid = $('#story-list .grid')\n\n    if ($grid.length === 0) {\n        return;\n    }\n\n    $grid.masonry({\n        itemSelector: '.grid-item', // use a separate class for itemSelector, other than .col-\n        columnWidth: '.grid-item',\n        percentPosition: true\n    });\n\n    $grid.find('.story .expand-button').click(function () {\n        $(this).parent('.story').toggleClass('expanded');\n        $(this).siblings('.content').scrollTop(0);\n        $grid.masonry();\n    });\n});\n","// Control designer edit form.\n\n$(function () {\n\n    $('.image-upload').each(function () {\n        var $button = $(this).find('button');\n        var $fileInput = $(this).find('input[type=\"file\"]');\n        var $preview = $(this).find('.image-preview');\n\n        // When click button, open file dialog\n        $button.click(function () {\n            $fileInput.click();\n        });\n\n        // When selected a file from file dialog, show preview and upload image\n        $fileInput.change(function () {\n            if (this.files && this.files[0] && this.files[0].name.match(/\\.(jpg|jpeg|png|gif)$/)) {\n                var reader = new FileReader();\n\n                reader.onload = function (e) {\n                    $preview.css('background-image', 'url(' + e.target.result + ')');\n                }\n\n                reader.readAsDataURL(this.files[0]);\n\n                // TODO Upload file...\n            }\n        });\n    });\n\n    // Image gallery management\n    $('.gallery-upload').each(function () {\n        var $button = $(this).find('button');\n        var $fileInput = $(this).find('input[type=\"file\"]');\n        var $gallery = $(this).find('.image-gallery');\n        var $imagePreviewTemplate = $($(this).find('template').prop('content')).find('.image-preview');\n\n        // Sortable\n        Sortable.create($gallery[0], {animation: 300});\n\n        // Remove image\n        $(\".image-preview span\").click(function () {\n            $(this).parent('.image-preview').remove();\n        });\n\n        // When click button, open file dialog\n        $button.click(function () {\n            $fileInput.click();\n        });\n\n        // When selected a file from file dialog, show preview and upload image\n        $fileInput.change(function () {\n            if (this.files && this.files[0] && this.files[0].name.match(/\\.(jpg|jpeg|png|gif)$/)) {\n                var reader = new FileReader();\n\n                var $imagePreview = $imagePreviewTemplate.clone();\n                $imagePreview.find('span').click(function () {\n                    $imagePreview.remove();\n                });\n\n                reader.onload = function (e) {\n                    $imagePreview.css('background-image', 'url(' + e.target.result + ')');\n                    $imagePreview.appendTo($gallery);\n                }\n\n                reader.readAsDataURL(this.files[0]);\n\n                // TODO Upload file...\n            }\n        });\n    });\n\n});\n"],"sourceRoot":"/source/"}